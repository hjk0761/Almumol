# Info
[네트워크 복구](https://boj.kr/2211)

- 난이도: 골드 2
- 분류: 그래프 이론, 최단 경로, 데이크스트라

## 💡 풀이 방법 요약

최단 경로 + 스패닝 트리 입니다.

여기서 중요한 점은 MST 가 아니라는 점인데, 문제의 각 조건을 살펴보면 1번 조건이 스패닝 트래를 의미하는 것이고, 2번 조건이 각 노드는 1번으로부터 최단 경로로 이어저야 함을 의미합니다.

MST 는 모든 경로의 합이 최소인 스패닝 트리를 의미하므로 이 트리에서의 한 노드와 1번 노드 사이의 거리가 최소임을 보장하지 못합니다.

따라서 문제 접근을 1번 노드로부터 각 노드로 최단 거리로 갈 수 있도록 경로를 잡아야 하고, 그렇기에 다익스트라가 사용됩니다.

다익스트라에서 기존 가중치보다 새로 설정할 가중치가 크면 기존 경로보다 현재 노드를 통해 다음 노드로 가는 새로운 길이 더 거리가 짧다는 것을 의미합니다.

따라서 이 순간에 경로 선택이 이루어저야 하지만, 다익스트라를 돌면서 경로를 매 번 가지고 있는 것은 공간 복잡도에 있어 매우 비효율적입니다.

여기서 아이디어가 필요한데, 각 노드의 부모 노드를 기록하는 것입니다.

다익스트라에서 경로가 갱신되는 시점(현재 노드로부터 다음 노드로 가는 경로가 갱신)에 다음 노드의 부모 노드로 현재 노드를 기억하면, 결국 경로가 갱신된 경우의 부모 노드만 남게 되므로 최단 거리를 노드 사이의 연결로 저장하게 되는 것입니다.

이렇게 다익스트라를 수행하면서 부모 노드를 갱신해주었다면 이를 순회하면서 1번부터 각 노드로 가는 경로를 찾아주면 됩니다.

저는 노드가 최대 1000개 이므로 혼선이 생기지 않도록 1번부터 시작해서 부모 노드가 현재 노드인 노드를 다음 노드로 설정하고, (현재 노드, 다음 노드)를 경로로 저장했습니다.

## 👀 실패 이유

처음엔 문제를 읽고 MST 인 줄 알고 그렇게 풀어서 틀렸습니다.

몇 가지 예제를 생각해보니 문제의 의도가 MST가 아닌 것을 알았습니다.

이후에 다익스트라롤 바꾸고, 처음엔 갱신되는 시점에 이전 경로를 없애고 지금 경로를 더해주는 식으로 했는데, 어느 경로가 없어져야 할 경로인지를 찾는 것이 불가능했습니다.

이에 지금의 방법으로 바꿨습니다.

## 🙂 마무리
